{"version":3,"sources":["webpack:///./src/assets/img/8.jpg","webpack:///src/views/Cinema2.vue","webpack:///./src/views/Cinema2.vue?a023","webpack:///./src/views/Cinema2.vue"],"names":["module","exports","__webpack_require__","p","Cinema2","three_module","name","data","width","height","scene","camera","controls","renderer","isOpenDoor","amdLight","dirLight","ponLight","raycaster","mouse","dummy","seatNum","rowNum","active","centerPoint","lookAtX","lookAtY","lookAtZ","methods","toLocation","val","index","_this","this","cameraPosition","getObjectByName","rotation","position","row","lookAt","Math","ceil","col","centerPointRow","centerPointCol","cX","x","cY","y","cZ","z","Tween_default","a","Tween","to","easing","Easing","Linear","None","onUpdate","set","start","initScene","container","$refs","webglDom","offsetWidth","offsetHeight","fog","background","initCamera","add","initControls","OrbitControls","domElement","initLight","initRenderer","antialias","alpha","setClearColor","setClearAlpha","setPixelRatio","min","window","devicePixelRatio","setSize","shadowMap","enabled","type","appendChild","render","initScreen","img","load","texture","geometry","material","color","map","transparent","mesh","addBox","onClick","event","preventDefault","clientX","innerWidth","clientY","innerHeight","setFromCamera","intersects","intersectObjects","children","door","length","console","log","openDoor","PI","Elastic","Out","closeDoor","chang","gao","kuan","obj","vector","clone","update","requestAnimationFrame","init","mounted","middle","floor","$nextTick","views_Cinema2","_vm","_h","$createElement","_c","_self","staticClass","ref","_v","_m","_l","v","i","key","class","activeColor","on","click","$event","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.d61367bd6a2117127843.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/8.cba89fc.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/img/8.jpg\n// module id = MNtS\n// module chunks = 3 4","<template>\r\n    <div class=\"wrap\">\r\n        <div class=\"webglDom\" ref=\"webglDom\"></div>\r\n        <div class=\"operateArea\">\r\n            <div class=\"area-top\">\r\n                <div class=\"area-top-screen\">\r\n                    <div></div>\r\n                </div>\r\n                <div class=\"area-top-seat\">\r\n                    <div class=\"seat\" v-for=\"(v, i) in seatNum\" :key=\"i\" :class=\"{'activeColor': active == i}\" @click=\"toLocation(v, i)\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from 'three';\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\"\r\nimport TWEEN from \"tween.js\";\r\nconst ThreeBSP = require('three-js-csg')(THREE)\r\n\r\nexport default {\r\n    name: 'Cinema2',\r\n    data(){\r\n        return {\r\n            width: 0,\r\n            height: 0,\r\n            scene: null,\r\n            camera: null,\r\n            controls: null,\r\n            renderer: null,\r\n            isOpenDoor: true,\r\n            amdLight: null,\r\n            dirLight: null,\r\n            ponLight: null,\r\n            // 鼠标位置\r\n            raycaster: '',\r\n            mouse: '',\r\n            dummy: '',\r\n\r\n            seatNum: 60,\r\n            rowNum: 9,\r\n            active: 0,\r\n            centerPoint: 0,\r\n            lookAtX: 0,\r\n            lookAtY: 0,\r\n            lookAtZ: 0,\r\n        }\r\n    },\r\n    methods: {\r\n        toLocation(val, index) {\r\n            let _this = this\r\n            let door = this.scene.getObjectByName('door');\r\n            let isCenter = true;\r\n            let position = door.rotation;                   // 获取上一次物体的 x, y, z\r\n            let cameraPosition = this.camera.position       // 获取上一次相机的 x, y, z\r\n            let cameraLookAtPosition = this.camera.lookAt       // 获取上一次相机的 x, y, z\r\n            let row = Math.ceil(val / this.rowNum);         // 点击位置的排\r\n            let col = val % this.rowNum === 0 ? this.rowNum : val % this.rowNum;        // 点击位置的列\r\n            let centerPointRow = Math.ceil(this.centerPoint / this.rowNum);             // 中心点的排\r\n            let centerPointCol = this.centerPoint % this.rowNum === 0 ? this.rowNum : this.centerPoint % this.rowNum;   // 中心点的列\r\n            // 物体要改变的值\r\n            let x = 0;\r\n            let y = 0;\r\n            let z = 0;\r\n            // 相机要改变的值\r\n            let cX = cameraPosition.x\r\n            let cY = cameraPosition.y\r\n            let cZ = cameraPosition.z\r\n            let lookAtX = 0\r\n            let lookAtY = 0\r\n            let lookAtZ = 0\r\n            if(val === this.centerPoint) {\r\n                x = 0;\r\n                y = 0;\r\n                z = 0;\r\n                cX = 0;\r\n                cY = 30;\r\n                cZ = 800;\r\n                isCenter = true\r\n            } else {\r\n                if(row < centerPointRow) {\r\n                    x = (centerPointRow - row) * -.1\r\n                    cY = (centerPointRow - row) * -50\r\n                    cZ = 800 - ((centerPointRow - row) * 10)\r\n                } else {\r\n                    x = (row - centerPointRow) * .1\r\n                    cY = (row - centerPointRow) * 80\r\n                    cZ = 800 + ((row - centerPointRow) * 10)\r\n                }\r\n\r\n                if(col < centerPointCol) {\r\n                    y = (centerPointCol - col) * .1\r\n                    cX = (centerPointCol - col) * -40\r\n                } else {\r\n                    y = (col - centerPointCol) * -.1\r\n                    cX = (col - centerPointCol) * 40\r\n                }\r\n                isCenter = false;\r\n            }\r\n            // console.log(x, y, z)\r\n            // console.log(cX, cY, cZ)\r\n            // console.log(lookAtX, lookAtY, lookAtZ)\r\n            // console.log(val, this.centerPoint , row+'排', col+'列', centerPointRow+'排', centerPointCol+'列')\r\n            \r\n            // 对物体进行转动\r\n            // let openDoor = new TWEEN.Tween({\r\n            //     x: position.x,\r\n            //     y: position.y,\r\n            //     z: position.z\r\n            // }).to({ x, y, z }, 500).easing(TWEEN.Easing.Linear.None).onUpdate(function () {\r\n            //     door.rotation.set(this.x, this.y, this.z);\r\n            // }).start();\r\n            // 对相机进行转动\r\n            let openCamera = new TWEEN.Tween({\r\n                cX: cameraPosition.x,\r\n                cY: cameraPosition.y,\r\n                cZ: cameraPosition.z,\r\n                lookAtX,\r\n                lookAtY,\r\n                lookAtZ,\r\n            }).to({ cX, cY, cZ, lookAtX, lookAtY, lookAtZ }, 500).easing(TWEEN.Easing.Linear.None).onUpdate(function () {\r\n                _this.camera.position.set(this.cX, this.cY, this.cZ);\r\n                _this.camera.lookAt(this.lookAtX, this.lookAtY, this.lookAtZ)\r\n            }).start();\r\n\r\n            this.active = index\r\n        },\r\n        // 场景\r\n        initScene(){\r\n            // 初始化画布宽高\r\n            const container = this.$refs.webglDom;\r\n            this.width = container.offsetWidth;\r\n            this.height = container.offsetHeight;\r\n            this.scene = new THREE.Scene();\r\n            this.scene.fog = new THREE.Fog(0x005577, 1, 2800)\r\n            this.scene.background = new THREE.Color( 0x000000 );\r\n            this.raycaster = new THREE.Raycaster();\r\n            this.mouse = new THREE.Vector2();\r\n            this.dummy = new THREE.Object3D();\r\n        },\r\n        // 相机\r\n        initCamera(){\r\n            this.camera = new THREE.PerspectiveCamera(45, this.width / this.height, 0.01, 10000);\r\n            this.camera.position.set(0, 30, 800);\r\n            this.add(this.camera);\r\n            this.camera.lookAt(this.scene.position);\r\n        },\r\n        // 控制器\r\n        initControls(){\r\n            this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n        },\r\n        // 添加灯光\r\n        initLight(){\r\n            this.amdLight = new THREE.AmbientLight('#aaa');\r\n\t\t\tthis.dirLight = new THREE.DirectionalLight('#aaa')\r\n\t\t\tthis.ponLight = new THREE.PointLight('#aaa')\r\n\t\t\tthis.amdLight.position.set( 0, 0, 0 )\r\n\t\t\tthis.dirLight.position.set( 0, 0, 0 )\r\n            this.ponLight.position.set( 0, 0, 0 )\r\n\t\t\tthis.add(this.amdLight);\t\t    // 环境光\r\n\t\t\tthis.add(this.dirLight);\t\t    // 方向光\r\n\t\t\tthis.add(this.ponLight);\t\t\t// 点光源\r\n        },\r\n        // 渲染器\r\n        initRenderer(){\r\n            this.renderer = new THREE.WebGLRenderer({\r\n                antialias: true,\r\n                alpha: true,\r\n            })\r\n            this.renderer.setClearColor(0x4682B4,1.0);\r\n            this.renderer.setClearAlpha(0);\r\n            this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\r\n            this.renderer.setSize(this.width, this.height);\r\n            // 开启阴影支持\r\n            this.renderer.shadowMap.enabled = true;\r\n            // 阴影类型\r\n            this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n            this.$refs.webglDom.appendChild(this.renderer.domElement);\r\n            this.render();\r\n        },\r\n        // 创建屏幕\r\n        initScreen(){\r\n            let _this = this;\r\n            let img = require('../assets/img/8.jpg')\r\n            let loader = new THREE.TextureLoader();\r\n            loader.load(img,function(texture){\r\n                const geometry = new THREE.BoxGeometry(1400, 800, 2);\r\n                const material = new THREE.MeshLambertMaterial ({\r\n                    color: '#ccc',\r\n                    map: texture\r\n                });\r\n                material.transparent = true;\r\n                const mesh = new THREE.Mesh(geometry, material);\r\n                mesh.position.set(-65, -5, -2);\r\n                _this.dummy.add(mesh)\r\n                _this.dummy.position.set(65, -30, -800);\r\n                _this.dummy.name = 'door'\r\n                _this.add(_this.dummy);\r\n                // window.addEventListener(\"click\", _this.onClick, false);\r\n            })\r\n            this.addBox(10, 10, 1600, '#aaa', -695, 360, 0)\r\n            this.addBox(10, 10, 1600, '#aaa', 695, 360, 0)\r\n            this.addBox(10, 10, 1600, '#aaa', 695, -430, 0)\r\n            this.addBox(10, 10, 1600, '#aaa', -695, -430, 0)\r\n        },\r\n        // 物体点击事件\r\n        onClick(event){\r\n            event.preventDefault();\r\n            let _this = this;\r\n            // 将鼠标位置归一化为设备坐标。x 和 y 方向的取值范围是 (-1 to +1)\r\n            this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\r\n            this.mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;\r\n            this.raycaster.setFromCamera(this.mouse, this.camera);\r\n            let  intersects = this.raycaster.intersectObjects(this.scene.children, true);\r\n            let door = this.scene.getObjectByName('door')\r\n            if (intersects.length > 0) {\r\n                if(this.isOpenDoor){\r\n                    console.log(door)\r\n                    // door.rotation.y -= 0.25*Math.PI;\r\n                    let openDoor = new TWEEN.Tween({y: 0})\r\n                    openDoor.to({y: -0.25*Math.PI}, 1000);\r\n                    openDoor.easing(TWEEN.Easing.Elastic.Out);\r\n                    openDoor.onUpdate(function () {\r\n                        door.rotation.set(0, this.y , 0);\r\n                    }).start();\r\n                    this.isOpenDoor = false;\r\n                } else {\r\n                    // door.rotation.y += 0.25*Math.PI;\r\n                    let closeDoor = new TWEEN.Tween({y: -0.25*Math.PI})\r\n                    closeDoor.to({y: 0},1000);\r\n                    closeDoor.easing(TWEEN.Easing.Elastic.Out);\r\n                    closeDoor.onUpdate(function () {\r\n                        door.rotation.set(0, this.y, 0);\r\n                    }).start();\r\n                    this.isOpenDoor = true;\r\n                }\r\n            }\r\n        },\r\n        // 创建物体\r\n        addBox (chang, gao, kuan, color, x, y, z) {\r\n            const geometry = new THREE.BoxGeometry(chang, gao, kuan);\r\n            const material = new THREE.MeshLambertMaterial ({\r\n                color: color\r\n            });\r\n            const mesh = new THREE.Mesh(geometry, material);\r\n            mesh.position.set(x, y, z);\r\n            this.add(mesh);\r\n        },\r\n        // 添加物体\r\n        add (obj) {\r\n            this.scene.add(obj);\r\n        },\r\n        render () {\r\n            let vector = this.camera.position.clone();\r\n            this.ponLight.position.set(vector.x,vector.y,vector.z); //点光源位置\r\n            this.renderer.render(this.scene, this.camera);\r\n            TWEEN.update();\r\n            requestAnimationFrame(this.render);\r\n        },\r\n        init () {\r\n            this.initScene()\r\n            this.initCamera()\r\n            this.initLight()\r\n            this.initScreen()\r\n            this.initRenderer()\r\n            // this.initControls()\r\n        }\r\n    },\r\n    mounted(){\r\n        let middle = Math.floor(this.rowNum / 2)\r\n        let row = Math.floor(this.seatNum / this.rowNum) / 2\r\n        this.active = Math.ceil(middle + (row * this.rowNum))\r\n        this.centerPoint = Math.ceil(middle + (row * this.rowNum)) + 1\r\n        this.$nextTick(this.init);\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .wrap {\r\n        width: 100%;\r\n        height: 100%;\r\n        background-size: 100% 100%;\r\n        display: flex;\r\n        .webglDom {\r\n            width: 80%;\r\n            height: 100%;\r\n            // background: url('../assets/img/7.jpg') no-repeat;\r\n            background-size: 100% 100%;\r\n            canvas {\r\n                width: 100%;\r\n            }\r\n        }\r\n        .operateArea {\r\n            width: 20%;\r\n            height: 100%;\r\n            background-color: rgba(0, 0, 0, 0.8);\r\n            box-shadow: 0px 0px 2px 5px #333;\r\n            padding: 20px 10px;\r\n            .area-top {\r\n                width: 100%;\r\n                height: auto;\r\n                // justify-content: space-around;\r\n                .area-top-screen {\r\n                    width: 100%;\r\n                    height: 20px;\r\n                    display: flex;\r\n                    justify-content: space-around;\r\n                    >div {\r\n                        width: 70%;\r\n                        height: 20px;\r\n                        border-radius: 6px;\r\n                        border: 2px solid rgb(206, 206, 206);\r\n                    }\r\n                }\r\n                .area-top-seat {\r\n                    width: 100%;\r\n                    height: auto;\r\n                    display: flex;\r\n                    flex-wrap: wrap;\r\n                    margin-top: 30px;\r\n                    >.seat {\r\n                        width: 8.5%;\r\n                        height: 26px;\r\n                        border-radius: 6px;\r\n                        border: 2px solid rgb(206, 206, 206);\r\n                        margin: 4px;\r\n                    }\r\n                    .activeColor {\r\n                        border: 2px solid rgb(25, 112, 199);\r\n                        background-color: #39f;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/Cinema2.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{ref:\"webglDom\",staticClass:\"webglDom\"}),_vm._v(\" \"),_c('div',{staticClass:\"operateArea\"},[_c('div',{staticClass:\"area-top\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"area-top-seat\"},_vm._l((_vm.seatNum),function(v,i){return _c('div',{key:i,staticClass:\"seat\",class:{'activeColor': _vm.active == i},on:{\"click\":function($event){return _vm.toLocation(v, i)}}})}),0)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"area-top-screen\"},[_c('div')])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5925a360\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Cinema2.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5925a360\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Cinema2.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cinema2.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Cinema2.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5925a360\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Cinema2.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Cinema2.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}