{"version":3,"sources":["webpack:///./node_modules/indexdbwrapper/index.js","webpack:///src/views/IndexDB.vue","webpack:///./src/views/IndexDB.vue?d23e","webpack:///./src/views/IndexDB.vue"],"names":["DBWrapper","[object Object]","name","version","onupgradeneeded","onversionchange","this","_onversionchange","_name","_version","_onupgradeneeded","_db","db","Promise","resolve","reject","openRequestTimedOut","setTimeout","Error","OPEN_TIMEOUT","openRequest","indexedDB","open","onerror","error","evt","transaction","abort","target","result","close","onsuccess","bind","storeName","query","getAllKeys","count","getAllMatching","includeKeys","map","key","index","direction","txn","done","store","objectStore","results","openCursor","cursor","primaryKey","value","push","length","continue","storeNames","type","callback","onabort","oncomplete","method","args","request","deleteDatabase","onblocked","prototype","methodsToWrap","readonly","readwrite","mode","methods","Object","entries","IDBObjectStore","async","_call","indexdbwrapper","IndexDB","data","dbObject","dbName","info","id","Date","now","age","sex","checkboxList","hobby","dataList","checkboxDataList","isUpdateDate","computed","disabled","trim","addData","_this2","asyncToGenerator_default","regenerator_default","a","mark","_callee","arr","wrap","_context","prev","next","forEach","v","v1","join","put","sent","es","infoClear","getAllData","add","stop","_this3","_callee2","_context2","getAll","delData","item","_this4","_callee3","_context3","delete","updateData","_this5","_callee4","res","_context4","get","mounted","_this6","_callee5","_this","_context5","event","objectStoreNames","contains","createObjectStore","keyPath","views_IndexDB","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","label","label-width","placeholder","model","$$v","$set","expression","_v","icon-size","_l","shape","_s","on","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"6LAAAA,EACAC,YACAC,EACAC,GACAC,gBAAKA,EAAAC,kBAAAC,KAAAC,sBAELD,KAAAE,MAAAN,EACAI,KAAAG,SAAAN,EACAG,KAAAI,iBAAAN,EACAE,KAAAC,iBAAAF,EAEAC,KAAAK,IAAA,KAGAC,SACA,OAAAN,KAAAK,IAGAV,aACA,IAAAK,KAAAK,IA+BA,OA9BAL,KAAAK,UAAA,IAAAE,QAAA,CAAAC,EAAAC,KACA,IAAAC,GAAA,EACAC,WAAA,KACAD,GAAA,EACAD,EAAA,IAAAG,MAAA,gDACOZ,KAAAa,cACP,MAAAC,EAAAC,UAAAC,KAAAhB,KAAAE,MAAAF,KAAAG,UAEAW,EAAAG,QAAA,KAAAR,EAAAK,EAAAI,QAEAJ,EAAAhB,gBAAAqB,KACAT,GACAI,EAAAM,YAAAC,QACAF,EAAAG,OAAAC,OAAAC,SACSxB,KAAAI,kBACTJ,KAAAI,iBAAAe,KAIAL,EAAAW,UAAA,GAAgCH,aAChC,MAAAhB,EAAAgB,EAAAC,OAEAb,EACAJ,EAAAkB,SAEAlB,EAAAP,gBAAAC,KAAAC,iBAAAyB,KAAA1B,MACAQ,EAAAF,QAIAN,KAGAL,aAAAgC,EAAAC,GACA,aAAA5B,KAAA6B,WAAAF,EAAAC,EAAA,OAGAjC,aAAAgC,EAAAC,EAAAE,GACA,aAAA9B,KAAA+B,eAAAJ,GACAC,QACAE,UAIAnC,iBAAAgC,EAAAC,EAAAE,GACA,aAAA9B,KAAA+B,eAAAJ,GACAC,QACAE,QACAE,aAAA,KACKC,IAAA,EAASC,SAAMA,GAGpBvC,qBACAgC,GACAQ,MAAKA,EAAAP,QAAA,KAAAQ,YAAA,OAAAN,QAAAE,mBAEL,aAAAhC,KAAAoB,aAAAO,GAAA,YAAAU,EAAAC,KACA,MAAAC,EAAAF,EAAAG,YAAAb,GAEAc,MADAN,EAAAI,EAAAJ,SAAAI,GAGAG,WAAAd,EAAAQ,GAAAX,UAAA,GAAwDH,aACxD,MAAAqB,EAAArB,EAAAC,OAEA,GAAAoB,EAAA,CACA,MAAAC,WAAiBA,EAAAV,MAAAW,SAAyBF,EAC1CF,EAAAK,KACAd,GAEAY,aACAV,MACAW,SAEAA,GAGAf,GAAAW,EAAAM,QAAAjB,EACAQ,EAAAG,GAEAE,EAAAK,gBAGAV,EAAAG,OAMA9C,kBAAAsD,EAAAC,EAAAC,GAEA,aADAnD,KAAAgB,aACA,IAAAT,QAAA,CAAAC,EAAAC,KACA,MAAA4B,EAAArC,KAAAK,IAAAe,YAAA6B,EAAAC,GAEAb,EAAAe,QAAA,GAAsB9B,YAASb,EAAAa,EAAAJ,QAE/BmB,EAAAgB,WAAA,KAAA7C,KAEA2C,EAAAd,EAAAQ,GAAArC,EAAAqC,MAIAlD,YAAA2D,EAAA3B,EAAAuB,KAAAK,GAOA,aAAAvD,KAAAoB,aAAAO,GAAAuB,EANA,CAAAb,EAAAC,KACAD,EAAAG,YAAAb,GAAA2B,MAAAC,GAAA9B,UAAA,GAAgEH,aAChEgB,EAAAhB,EAAAC,YAOA5B,mBACAK,KAAAwB,QAGA7B,QACAK,KAAAK,MACAL,KAAAK,IAAAmB,QAEAxB,KAAAK,IAAA,MAIAV,4BAAAC,SACA,IAAAW,QAAA,CAAAC,EAAAC,KACA,MAAA+C,EAAAzC,UAAA0C,eAAA7D,GAEA4D,EAAAvC,QAAA,GAA0BK,aAC1Bb,EAAAa,EAAAJ,SAGAsC,EAAAE,UAAA,MACAjD,EAAA,IAAAG,MAAA,qBAGA4C,EAAA/B,UAAA,MACAjB,SAMAd,EAAAiE,UAAA9C,aAAA,IAEA,WACA,MAAA+C,GACAC,UAAA,8CACAC,WAAA,+BAGA,UAAAC,EAAAC,KAAAC,OAAAC,QAAAN,GACA,UAAAN,KAAAU,EACAV,KAAAa,eAAAR,YACAjE,EAAAiE,UAAAL,GAAAc,eAAAzC,KAAA4B,GACA,aAAAvD,KAAAqE,MAAAf,EAAA3B,EAAAoC,KAAAR,KAVA,GAiBe,IAAAe,EAAA,EC3IfC,GACA3E,KAAA,UACA4E,KAFA,WAGA,OACAlE,GAAA,KACAmE,SAAA,KACAC,OAAA,SACA/C,UAAA,YACA9B,QAAA,EACA8E,MACAC,GAAAC,KAAAC,MACAlF,KAAA,GACAmF,IAAA,GACAC,IAAA,IACAC,gBACAC,UAEAC,YACAC,mBACAxF,KAAA,IACAiD,MAAA,MAEAjD,KAAA,IACAiD,MAAA,MAEAjD,KAAA,IACAiD,MAAA,QAEAjD,KAAA,IACAiD,MAAA,OAEAwC,cAAA,IAGAC,UACAC,SADA,WAEA,QAAAvF,KAAA2E,KAAA/E,KAAA4F,QAAAxF,KAAA2E,KAAAI,IAAAS,QAAAxF,KAAA2E,KAAAM,aAAAlC,UAMAiB,SAEAyB,QAFA,WAEA,IAAAC,EAAA1F,KAAA,OAAA2F,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAA,OAAAJ,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACAJ,KACAN,EAAAf,KAAAK,IAAA,KAAAU,EAAAf,KAAAK,IAAA,QACAU,EAAAN,iBAAAiB,QAAA,SAAAC,GACAZ,EAAAf,KAAAM,aAAAoB,QAAA,SAAAE,GACAD,EAAA1G,MAAA2G,GAAAP,EAAAlD,KAAAwD,EAAAzD,WAGA6C,EAAAf,KAAAO,MAAAc,EAAAQ,KAAA,MACAd,EAAAL,aATA,CAAAa,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,EAUAV,EAAApF,GAAAmG,IAAAf,EAAA/D,UAAA+D,EAAAf,MAVA,UAWA,iBAXAuB,EAAAQ,KAAA,CAAAR,EAAAE,KAAA,gBAYAnC,OAAA0C,EAAA,EAAA1C,CAAA,QACAyB,EAAAkB,YACAlB,EAAAL,cAAA,EAdAa,EAAAE,KAAA,GAeAV,EAAAmB,aAfA,QAAAX,EAAAE,KAAA,wBAAAF,EAAAE,KAAA,GAkBAV,EAAApF,GAAAwG,IAAApB,EAAA/D,UAAA+D,EAAAf,MAlBA,WAmBA,iBAnBAuB,EAAAQ,KAAA,CAAAR,EAAAE,KAAA,gBAoBAnC,OAAA0C,EAAA,EAAA1C,CAAA,QACAyB,EAAAkB,YArBAV,EAAAE,KAAA,GAsBAV,EAAAmB,aAtBA,yBAAAX,EAAAa,SAAAhB,EAAAL,KAAAC,IA4BAkB,WA9BA,WA8BA,IAAAG,EAAAhH,KAAA,OAAA2F,IAAAC,EAAAC,EAAAC,KAAA,SAAAmB,IAAA,OAAArB,EAAAC,EAAAI,KAAA,SAAAiB,GAAA,cAAAA,EAAAf,KAAAe,EAAAd,MAAA,cAAAc,EAAAd,KAAA,EACAY,EAAA1G,GAAA6G,OAAAH,EAAArF,WADA,OACAqF,EAAA7B,SADA+B,EAAAR,KAAA,wBAAAQ,EAAAH,SAAAE,EAAAD,KAAArB,IAIAyB,QAlCA,SAkCAC,GAAA,IAAAC,EAAAtH,KAAA,OAAA2F,IAAAC,EAAAC,EAAAC,KAAA,SAAAyB,IAAA,OAAA3B,EAAAC,EAAAI,KAAA,SAAAuB,GAAA,cAAAA,EAAArB,KAAAqB,EAAApB,MAAA,cAAAoB,EAAApB,KAAA,EACAkB,EAAAhH,GAAAmH,OAAAH,EAAA3F,UAAA0F,EAAAzC,IADA,OAAA4C,EAAAd,KAEAY,EAAAT,aAFA,wBAAAW,EAAAT,SAAAQ,EAAAD,KAAA3B,IAKA+B,WAvCA,SAuCAL,GAAA,IAAAM,EAAA3H,KAAA,OAAA2F,IAAAC,EAAAC,EAAAC,KAAA,SAAA8B,IAAA,IAAAC,EAAA,OAAAjC,EAAAC,EAAAI,KAAA,SAAA6B,GAAA,cAAAA,EAAA3B,KAAA2B,EAAA1B,MAAA,cAAA0B,EAAA1B,KAAA,EACAuB,EAAArH,GAAAyH,IAAAJ,EAAAhG,UAAA0F,EAAAzC,IADA,QACAiD,EADAC,EAAApB,QAGAmB,EAAA7C,IAAA,KAAA6C,EAAA7C,IAAA,QACA2C,EAAAhD,KAAAkD,GAEAF,EAAAtC,cAAA,EANA,wBAAAyC,EAAAf,SAAAa,EAAAD,KAAAhC,IAQAiB,UA/CA,WAgDA5G,KAAA2E,KAAAC,GAAAC,KAAAC,MACA9E,KAAA2E,KAAA/E,KAAA,GACAI,KAAA2E,KAAAI,IAAA,GACA/E,KAAA2E,KAAAK,IAAA,IACAhF,KAAA2E,KAAAM,kBAGA+C,QAjGA,WAiGA,IAAAC,EAAAjI,KAAA,OAAA2F,IAAAC,EAAAC,EAAAC,KAAA,SAAAoC,IAAA,IAAAC,EAAA,OAAAvC,EAAAC,EAAAI,KAAA,SAAAmC,GAAA,cAAAA,EAAAjC,KAAAiC,EAAAhC,MAAA,cACA+B,EAAAF,EACAA,EAAA3H,GAAA,IAAAgE,EAAA2D,EAAAvD,OAAAuD,EAAApI,SACAC,gBADA,SACAuI,GACAF,EAAA1D,SAAA4D,EAAA/G,OAAAC,OAEA4G,EAAA1D,SAAA6D,iBAAAC,SAAAJ,EAAAxG,YACAwG,EAAA1D,SAAA+D,kBAAAL,EAAAxG,WAAA8G,QAAA,UAPAL,EAAAhC,KAAA,EAYA6B,EAAA3H,GAAAU,OAZA,cAAAoH,EAAAhC,KAAA,EAaA6B,EAAApB,aAbA,wBAAAuB,EAAArB,SAAAmB,EAAAD,KAAAtC,KCxIe+C,GADEC,OAFjB,WAA0B,IAAAC,EAAA5I,KAAa6I,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,YAAsBF,EAAA,OAAYE,YAAA,YAAsBF,EAAA,aAAkBG,OAAOC,MAAA,MAAAC,cAAA,QAAAC,YAAA,SAA0DC,OAAQzG,MAAA+F,EAAAjE,KAAA,KAAAxB,SAAA,SAAAoG,GAA+CX,EAAAY,KAAAZ,EAAAjE,KAAA,OAAA4E,IAAgCE,WAAA,eAAyBb,EAAAc,GAAA,KAAAX,EAAA,aAA8BG,OAAOC,MAAA,MAAAC,cAAA,QAAAC,YAAA,SAA0DC,OAAQzG,MAAA+F,EAAAjE,KAAA,IAAAxB,SAAA,SAAAoG,GAA8CX,EAAAY,KAAAZ,EAAAjE,KAAA,MAAA4E,IAA+BE,WAAA,cAAwBb,EAAAc,GAAA,KAAAX,EAAA,mBAAoCE,YAAA,QAAAC,OAA2B9G,UAAA,aAAAuH,YAAA,QAA4CL,OAAQzG,MAAA+F,EAAAjE,KAAA,IAAAxB,SAAA,SAAAoG,GAA8CX,EAAAY,KAAAZ,EAAAjE,KAAA,MAAA4E,IAA+BE,WAAA,cAAwBV,EAAA,OAAYE,YAAA,eAAyBL,EAAAc,GAAA,SAAAd,EAAAc,GAAA,KAAAX,EAAA,aAA8CG,OAAOtJ,KAAA,OAAYgJ,EAAAc,GAAA,OAAAd,EAAAc,GAAA,KAAAX,EAAA,aAA4CG,OAAOtJ,KAAA,OAAYgJ,EAAAc,GAAA,WAAAd,EAAAc,GAAA,KAAAX,EAAA,sBAAyDE,YAAA,QAAAC,OAA2B9G,UAAA,aAAAuH,YAAA,QAA4CL,OAAQzG,MAAA+F,EAAAjE,KAAA,aAAAxB,SAAA,SAAAoG,GAAuDX,EAAAY,KAAAZ,EAAAjE,KAAA,eAAA4E,IAAwCE,WAAA,uBAAiCV,EAAA,OAAYE,YAAA,eAAyBL,EAAAc,GAAA,SAAAd,EAAAc,GAAA,KAAAd,EAAAgB,GAAAhB,EAAA,0BAAAvB,EAAAlF,GAAiF,OAAA4G,EAAA,gBAA0B7G,IAAAC,EAAA+G,OAAiBtJ,KAAAyH,EAAAzH,KAAAiK,MAAA,YAAmCjB,EAAAc,GAAAd,EAAAkB,GAAAzC,EAAAxE,aAA+B,GAAA+F,EAAAc,GAAA,KAAAd,EAAAvD,aAAkL0D,EAAA,cAAoCE,YAAA,aAAAC,OAAgChG,KAAA,OAAAqC,SAAAqD,EAAArD,UAAsCwE,IAAKC,MAAA,SAAAC,GAAyB,OAAArB,EAAAnD,cAAuBmD,EAAAc,GAAA,UAAjVX,EAAA,cAAuDE,YAAA,aAAAC,OAAgChG,KAAA,OAAAqC,SAAAqD,EAAArD,UAAsCwE,IAAKC,MAAA,SAAAC,GAAyB,OAAArB,EAAAnD,cAAuBmD,EAAAc,GAAA,WAA+J,GAAAd,EAAAc,GAAA,KAAAX,EAAA,OAA6CE,YAAA,WAAsBL,EAAAgB,GAAAhB,EAAA,kBAAAvB,EAAAlF,GAA4C,OAAA4G,EAAA,MAAgB7G,IAAAC,IAAU4G,EAAA,OAAYE,YAAA,iBAA2BF,EAAA,OAAYE,YAAA,qBAA+BL,EAAAc,GAAA,6BAAAd,EAAAkB,GAAAzC,EAAAzH,MAAA,QAAAgJ,EAAAkB,GAAAzC,EAAArC,KAAA,QAAA4D,EAAAkB,GAAAzC,EAAAtC,KAAA,wBAAA6D,EAAAc,GAAA,KAAAX,EAAA,OAAwJE,YAAA,wBAAkCL,EAAAc,GAAA,6BAAAd,EAAAkB,GAAAzC,EAAAnC,OAAA,0BAAA0D,EAAAc,GAAA,KAAAX,EAAA,OAAyGE,YAAA,kBAA4BF,EAAA,cAAmBE,YAAA,MAAAC,OAAyBhG,KAAA,QAAc6G,IAAKC,MAAA,SAAAC,GAAyB,OAAArB,EAAAlB,WAAAL,OAA8BuB,EAAAc,GAAA,QAAAd,EAAAc,GAAA,KAAAX,EAAA,cAA8CE,YAAA,MAAAC,OAAyBhG,KAAA,UAAgB6G,IAAKC,MAAA,SAAAC,GAAyB,OAAArB,EAAAxB,QAAAC,OAA2BuB,EAAAc,GAAA,gBAAuB,MAEhhFQ,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE9F,EACAmE,GATF,EAVA,SAAA4B,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/10.25a837bbaab7f975d4f0.js","sourcesContent":["class DBWrapper {\n  constructor(\n    name,\n    version,\n    { onupgradeneeded, onversionchange = this._onversionchange } = {}\n  ) {\n    this._name = name;\n    this._version = version;\n    this._onupgradeneeded = onupgradeneeded;\n    this._onversionchange = onversionchange;\n\n    this._db = null;\n  }\n\n  get db() {\n    return this._db;\n  }\n\n  async open() {\n    if (this._db) return;\n    this._db = await new Promise((resolve, reject) => {\n      let openRequestTimedOut = false;\n      setTimeout(() => {\n        openRequestTimedOut = true;\n        reject(new Error(\"The open request was blocked and timed out\"));\n      }, this.OPEN_TIMEOUT);\n      const openRequest = indexedDB.open(this._name, this._version);\n\n      openRequest.onerror = () => reject(openRequest.error);\n\n      openRequest.onupgradeneeded = evt => {\n        if (openRequestTimedOut) {\n          openRequest.transaction.abort();\n          evt.target.result.close();\n        } else if (this._onupgradeneeded) {\n          this._onupgradeneeded(evt);\n        }\n      };\n\n      openRequest.onsuccess = ({ target }) => {\n        const db = target.result;\n\n        if (openRequestTimedOut) {\n          db.close();\n        } else {\n          db.onversionchange = this._onversionchange.bind(this);\n          resolve(db);\n        }\n      };\n    });\n    return this;\n  }\n\n  async getKey(storeName, query) {\n    return (await this.getAllKeys(storeName, query, 1))[0];\n  }\n\n  async getAll(storeName, query, count) {\n    return await this.getAllMatching(storeName, {\n      query,\n      count\n    });\n  }\n\n  async getAllKeys(storeName, query, count) {\n    return (await this.getAllMatching(storeName, {\n      query,\n      count,\n      includeKeys: true\n    })).map(({ key }) => key);\n  }\n\n  async getAllMatching(\n    storeName,\n    { index, query = null, direction = \"next\", count, includeKeys } = {}\n  ) {\n    return await this.transaction([storeName], \"readonly\", (txn, done) => {\n      const store = txn.objectStore(storeName);\n      const target = index ? store.index(index) : store;\n      const results = [];\n\n      target.openCursor(query, direction).onsuccess = ({ target }) => {\n        const cursor = target.result;\n\n        if (cursor) {\n          const { primaryKey, key, value } = cursor;\n          results.push(\n            includeKeys\n              ? {\n                  primaryKey,\n                  key,\n                  value\n                }\n              : value\n          );\n\n          if (count && results.length >= count) {\n            done(results);\n          } else {\n            cursor.continue();\n          }\n        } else {\n          done(results);\n        }\n      };\n    });\n  }\n\n  async transaction(storeNames, type, callback) {\n    await this.open();\n    return await new Promise((resolve, reject) => {\n      const txn = this._db.transaction(storeNames, type);\n\n      txn.onabort = ({ target }) => reject(target.error);\n\n      txn.oncomplete = () => resolve();\n\n      callback(txn, value => resolve(value));\n    });\n  }\n\n  async _call(method, storeName, type, ...args) {\n    const callback = (txn, done) => {\n      txn.objectStore(storeName)[method](...args).onsuccess = ({ target }) => {\n        done(target.result);\n      };\n    };\n\n    return await this.transaction([storeName], type, callback);\n  }\n\n  _onversionchange() {\n    this.close();\n  }\n\n  close() {\n    if (this._db) {\n      this._db.close();\n\n      this._db = null;\n    }\n  }\n\n  static async deleteDatabase(name) {\n    await new Promise((resolve, reject) => {\n      const request = indexedDB.deleteDatabase(name);\n\n      request.onerror = ({ target }) => {\n        reject(target.error);\n      };\n\n      request.onblocked = () => {\n        reject(new Error(\"Delete blocked\"));\n      };\n\n      request.onsuccess = () => {\n        resolve();\n      };\n    });\n  }\n}\n\nDBWrapper.prototype.OPEN_TIMEOUT = 2000;\n\n(function() {\n  const methodsToWrap = {\n    readonly: [\"get\", \"count\", \"getKey\", \"getAll\", \"getAllKeys\"],\n    readwrite: [\"add\", \"put\", \"clear\", \"delete\"]\n  };\n\n  for (const [mode, methods] of Object.entries(methodsToWrap)) {\n    for (const method of methods) {\n      if (method in IDBObjectStore.prototype) {\n        DBWrapper.prototype[method] = async function(storeName, ...args) {\n          return await this._call(method, storeName, mode, ...args);\n        };\n      }\n    }\n  }\n})();\n\nexport default DBWrapper;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/indexdbwrapper/index.js\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"indexDB\">\r\n        <div class=\"content\">\r\n            <van-field v-model=\"info.name\" label=\"姓名：\" label-width=\".5rem\" placeholder=\"请输入姓名\"/>\r\n            <van-field v-model=\"info.age\" label=\"年龄：\"  label-width=\".5rem\" placeholder=\"请输入年龄\"/>\r\n            <van-radio-group v-model=\"info.sex\" class=\"radio\" direction=\"horizontal\" icon-size=\"16px\">\r\n                <div class=\"radioLabel\">性别：</div>\r\n                <van-radio name=\"1\">男</van-radio>\r\n                <van-radio name=\"2\">女</van-radio>\r\n            </van-radio-group>\r\n            <van-checkbox-group v-model=\"info.checkboxList\" class=\"radio\" direction=\"horizontal\" icon-size=\"16px\">\r\n                <div class=\"radioLabel\">爱好：</div>\r\n                <van-checkbox v-for=\"(item, index) in checkboxDataList\" :key=\"index\" :name=\"item.name\" shape=\"square\">{{ item.value }}</van-checkbox>\r\n            </van-checkbox-group>\r\n\r\n            <van-button type=\"info\" class=\"confirmbtn\" @click=\"addData()\" v-if=\"!isUpdateDate\" :disabled=\"disabled\">添加数据</van-button>\r\n            <van-button type=\"info\" class=\"confirmbtn\" @click=\"addData()\" v-else :disabled=\"disabled\">修改数据</van-button>\r\n        </div>\r\n\r\n        <div class=\"listBox\">\r\n            <li v-for=\"(item, index) in dataList\" :key=\"index\">\r\n                <div class=\"listBox-left\">\r\n                    <div class=\"listBox-left-top\">\r\n                        姓名: {{ item.name }}，性别: {{ item.sex }}，年龄: {{ item.age }}\r\n                    </div>\r\n                    <div class=\"listBox-left-bottom\">\r\n                        爱好: {{ item.hobby }}\r\n                    </div>\r\n                </div>\r\n                <div class=\"listBox-right\">\r\n                    <van-button type=\"info\" class=\"btn\" @click=\"updateData(item)\">修改</van-button>\r\n                    <van-button type=\"danger\" class=\"btn\" @click=\"delData(item)\">删除</van-button>\r\n                </div>\r\n            </li>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from 'vant';\r\n// npm install --save indexdbwrapper\r\nimport IndexDBWrapper from 'indexdbwrapper'\r\nexport default {\r\n    name: 'indexDB',\r\n    data() {\r\n        return {\r\n            db: null,\r\n            dbObject: null,\r\n            dbName: 'dbName',\r\n            storeName: 'storeName',\r\n            version: 1,\r\n            info: {\r\n                id: Date.now(),\r\n                name: '',\r\n                age: '',\r\n                sex: '1',\r\n                checkboxList: [],\r\n                hobby: []\r\n            },\r\n            dataList: [],\r\n            checkboxDataList: [{\r\n                name: '1',\r\n                value: '唱'\r\n            },{\r\n                name: '2',\r\n                value: '跳'\r\n            },{\r\n                name: '3',\r\n                value: 'rap'\r\n            },{\r\n                name: '4',\r\n                value: '篮球'\r\n            }],\r\n            isUpdateDate: false,\r\n        }\r\n    },\r\n    computed: {\r\n        disabled () {\r\n            if(this.info.name.trim() && this.info.age.trim() && this.info.checkboxList.length) {\r\n                return false\r\n            }\r\n            return true\r\n        }\r\n    },\r\n    methods: {\r\n        // 添加数据\r\n        async addData () {\r\n            let arr = []\r\n            this.info.sex = this.info.sex == '1' ? '男' : '女'\r\n            this.checkboxDataList.forEach(v => {\r\n                this.info.checkboxList.forEach(v1 => {\r\n                    if(v.name == v1) arr.push(v.value)\r\n                })\r\n            })\r\n            this.info.hobby = arr.join(',')\r\n            if(this.isUpdateDate) {\r\n                let res = await this.db.put(this.storeName, this.info)\r\n                if(typeof res == 'number') {\r\n                    Toast('修改成功')\r\n                    this.infoClear()\r\n                    this.isUpdateDate = false\r\n                    await this.getAllData()\r\n                }\r\n            } else {\r\n                let res = await this.db.add(this.storeName, this.info)\r\n                if(typeof res == 'number') {\r\n                    Toast('添加成功')\r\n                    this.infoClear()\r\n                    await this.getAllData()\r\n                }\r\n            }\r\n            \r\n        },\r\n        // 查询数据\r\n        async getAllData() {\r\n            this.dataList = await this.db.getAll(this.storeName)\r\n        },\r\n        // 删除数据\r\n        async delData(item) {\r\n            let res = await this.db.delete(this.storeName, item.id)\r\n            this.getAllData()\r\n        },\r\n        // 修改数据\r\n        async updateData(item) {\r\n            let res = await this.db.get(this.storeName, item.id)\r\n            if(res) {\r\n                res.sex = res.sex == '男' ? '1' : '2'\r\n                this.info = res\r\n            }\r\n            this.isUpdateDate = true\r\n        },\r\n        infoClear () {\r\n            this.info.id = Date.now()\r\n            this.info.name = ''\r\n            this.info.age = ''\r\n            this.info.sex = '1'\r\n            this.info.checkboxList = []\r\n        }\r\n    },\r\n    async mounted () {\r\n        let _this = this\r\n        this.db = new IndexDBWrapper(this.dbName, this.version, {\r\n            onupgradeneeded(event) {\r\n                _this.dbObject = event.target.result // 数据库对象\r\n                let objectStore;\r\n                if (!_this.dbObject.objectStoreNames.contains(_this.storeName)) {\r\n                    objectStore = _this.dbObject.createObjectStore(_this.storeName, { keyPath: 'id' }) // 创建表\r\n                    // objectStore.createIndex('createTime', 'createTime', { unique: false }) // 创建索引 可以让你搜索任意字段\r\n                }\r\n            }\r\n        })\r\n        await this.db.open()\r\n        await this.getAllData()\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .indexDB {\r\n        width: 100%;\r\n        height: 100%;\r\n        padding: .1rem;\r\n    }\r\n    .content {\r\n        width: 100%;\r\n        height: auto;\r\n        overflow: hidden;\r\n        box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(150, 150, 150, 0.6);\r\n        border-radius: .06rem;\r\n        font-size: .14rem;\r\n        .radio {\r\n            padding: 10px 16px;\r\n            .radioLabel {\r\n                width: .5rem;\r\n                text-align: center;\r\n                font-size: .14rem;\r\n                margin-right: .2rem;\r\n            }\r\n        }\r\n        .confirmbtn {\r\n            width: 80%;\r\n            border-radius: .06rem;\r\n            box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);\r\n            margin: .1rem 0;\r\n        }\r\n    }\r\n    .listBox {\r\n        width: 100%;\r\n        height: calc(100% - 2.4rem);\r\n        overflow: auto;\r\n        box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(150, 150, 150, 0.6);\r\n        border-radius: .06rem;\r\n        margin-top: .1rem;\r\n        padding: .08rem;\r\n        li {\r\n            width: 100%;\r\n            height: .5rem;\r\n            line-height: .5rem;\r\n            border: 1px solid #ccc;\r\n            border-radius: .06rem;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            margin-bottom: .08rem;\r\n            padding: 0 .05rem;\r\n            .listBox-left {\r\n                font-size: .14rem;\r\n                .listBox-left-top {\r\n                    // width: ;\r\n                    height: 50%;\r\n                    line-height: .25rem;\r\n                }\r\n                .listBox-left-bottom {\r\n                    // width: ;\r\n                    height: 50%;\r\n                    line-height: .25rem;\r\n                    text-align: left;\r\n                }\r\n            }\r\n            .listBox-right {\r\n                height: 100%;\r\n                .btn {\r\n                    width: .46rem;\r\n                    height: 60%;\r\n                    padding: 0;\r\n                    line-height: 0;\r\n                    font-size: .14rem;\r\n                    border-radius: .04rem;\r\n                }\r\n            }\r\n        }\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/IndexDB.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"indexDB\"},[_c('div',{staticClass:\"content\"},[_c('van-field',{attrs:{\"label\":\"姓名：\",\"label-width\":\".5rem\",\"placeholder\":\"请输入姓名\"},model:{value:(_vm.info.name),callback:function ($$v) {_vm.$set(_vm.info, \"name\", $$v)},expression:\"info.name\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"label\":\"年龄：\",\"label-width\":\".5rem\",\"placeholder\":\"请输入年龄\"},model:{value:(_vm.info.age),callback:function ($$v) {_vm.$set(_vm.info, \"age\", $$v)},expression:\"info.age\"}}),_vm._v(\" \"),_c('van-radio-group',{staticClass:\"radio\",attrs:{\"direction\":\"horizontal\",\"icon-size\":\"16px\"},model:{value:(_vm.info.sex),callback:function ($$v) {_vm.$set(_vm.info, \"sex\", $$v)},expression:\"info.sex\"}},[_c('div',{staticClass:\"radioLabel\"},[_vm._v(\"性别：\")]),_vm._v(\" \"),_c('van-radio',{attrs:{\"name\":\"1\"}},[_vm._v(\"男\")]),_vm._v(\" \"),_c('van-radio',{attrs:{\"name\":\"2\"}},[_vm._v(\"女\")])],1),_vm._v(\" \"),_c('van-checkbox-group',{staticClass:\"radio\",attrs:{\"direction\":\"horizontal\",\"icon-size\":\"16px\"},model:{value:(_vm.info.checkboxList),callback:function ($$v) {_vm.$set(_vm.info, \"checkboxList\", $$v)},expression:\"info.checkboxList\"}},[_c('div',{staticClass:\"radioLabel\"},[_vm._v(\"爱好：\")]),_vm._v(\" \"),_vm._l((_vm.checkboxDataList),function(item,index){return _c('van-checkbox',{key:index,attrs:{\"name\":item.name,\"shape\":\"square\"}},[_vm._v(_vm._s(item.value))])})],2),_vm._v(\" \"),(!_vm.isUpdateDate)?_c('van-button',{staticClass:\"confirmbtn\",attrs:{\"type\":\"info\",\"disabled\":_vm.disabled},on:{\"click\":function($event){return _vm.addData()}}},[_vm._v(\"添加数据\")]):_c('van-button',{staticClass:\"confirmbtn\",attrs:{\"type\":\"info\",\"disabled\":_vm.disabled},on:{\"click\":function($event){return _vm.addData()}}},[_vm._v(\"修改数据\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"listBox\"},_vm._l((_vm.dataList),function(item,index){return _c('li',{key:index},[_c('div',{staticClass:\"listBox-left\"},[_c('div',{staticClass:\"listBox-left-top\"},[_vm._v(\"\\n                    姓名: \"+_vm._s(item.name)+\"，性别: \"+_vm._s(item.sex)+\"，年龄: \"+_vm._s(item.age)+\"\\n                \")]),_vm._v(\" \"),_c('div',{staticClass:\"listBox-left-bottom\"},[_vm._v(\"\\n                    爱好: \"+_vm._s(item.hobby)+\"\\n                \")])]),_vm._v(\" \"),_c('div',{staticClass:\"listBox-right\"},[_c('van-button',{staticClass:\"btn\",attrs:{\"type\":\"info\"},on:{\"click\":function($event){return _vm.updateData(item)}}},[_vm._v(\"修改\")]),_vm._v(\" \"),_c('van-button',{staticClass:\"btn\",attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.delData(item)}}},[_vm._v(\"删除\")])],1)])}),0)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-09eec19f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/IndexDB.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-09eec19f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./IndexDB.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./IndexDB.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./IndexDB.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09eec19f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./IndexDB.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/IndexDB.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}